"use strict";(self.webpackChunksocio=self.webpackChunksocio||[]).push([[546],{9546:(oe,y,r)=>{r.r(y),r.d(y,{FamilyModule:()=>ne});var m=r(6274),c=r(5543),Z=r(6006),u=r(7194),h=r(2812),f=r(3324),e=r(2741),x=r(9923),b=r(7535),T=r(267),C=r(6286),q=r(9917),_=r(8561),I=r(2092);let d=(()=>{class t{constructor(i){this._httpClient=i,this._family=new x.X(null),this._families=new x.X(null)}get families$(){return this._families.asObservable()}get family$(){return this._family.asObservable()}getFamilies(i){return this._httpClient.get("api/apps/family").pipe((0,C.b)(n=>{this._families.next(n)}))}getFamilyById(i){return this._families.pipe((0,q.q)(1),(0,_.U)(n=>{const a=n.find(l=>l.id===i)||null;return this._family.next(a),a}),(0,h.w)(n=>n?(0,T.of)(n):(0,b._)("Could not found the family with id of "+i+"!")))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(I.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=r(1318),p=r(2169),A=r(823),g=r(1749),D=r(9018),v=r(7617);let U=(()=>{class t{transform(i,n){if(!i)return null;const a=i.reduce((l,s)=>(l[s[n]]?l[s[n]].push(s):l[s[n]]=[s],l),{});return Object.keys(a).map(l=>({key:l,value:a[l]}))}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=e.Yjl({name:"groupBy",type:t,pure:!0}),t})();const k=["matDrawer"];function O(t,o){1&t&&e.GkF(0)}const L=function(t){return{family:t}};function Q(t,o){if(1&t&&(e.ynx(0),e.YNc(1,O,1,0,"ng-container",21),e.BQk()),2&t){const i=o.$implicit;e.oxw(3);const n=e.MAs(18);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,L,i))}}function J(t,o){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",18),e.TgZ(2,"div",19),e._uU(3),e.qZA(),e.TgZ(4,"div",20),e.YNc(5,Q,2,4,"ng-container",17),e.qZA(),e.qZA(),e.qZA()),2&t){const i=o.$implicit;e.xp6(3),e.Oqu(i.key),e.xp6(2),e.Q6J("ngForOf",i.value)}}function M(t,o){if(1&t&&(e.ynx(0),e.YNc(1,J,6,2,"div",17),e.ALo(2,"groupBy"),e.BQk()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,i.families,"divisionId"))}}const S=function(t){return["./",t]};function R(t,o){if(1&t&&(e.TgZ(0,"div",22),e.TgZ(1,"div",23),e._UZ(2,"img",24),e.qZA(),e.TgZ(3,"div",25),e.TgZ(4,"div",26),e.TgZ(5,"div",27),e.TgZ(6,"div",28),e._uU(7),e.qZA(),e.TgZ(8,"div",29),e._uU(9),e.qZA(),e.TgZ(10,"div",28),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",30),e.TgZ(13,"button",31),e._UZ(14,"mat-icon",32),e.qZA(),e.TgZ(15,"button",31),e._UZ(16,"mat-icon",32),e.qZA(),e.TgZ(17,"button",33),e._UZ(18,"mat-icon",32),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=o.family;e.xp6(7),e.Oqu(i.divisionId),e.xp6(2),e.hij(" ",i.name," "),e.xp6(2),e.Oqu(i.address),e.xp6(3),e.Q6J("svgIcon","feather:phone"),e.xp6(2),e.Q6J("svgIcon","feather:navigation"),e.xp6(1),e.Q6J("routerLink",e.VKq(7,S,i.id)),e.xp6(1),e.Q6J("svgIcon","feather:info")}}function B(t,o){1&t&&(e.TgZ(0,"div",34),e._UZ(1,"mat-icon",35),e.TgZ(2,"div",36),e._uU(3,"There are no items!"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("svgIcon","iconsmind:file_hide"))}let F=(()=>{class t{constructor(i,n,a,l,s){this._activatedRoute=i,this._changeDetectorRef=n,this._router=a,this._fileManagerService=l,this._fuseMediaWatcherService=s,this._unsubscribeAll=new Z.xQ,this.searchInputControl=new f.NI}ngOnInit(){this._fileManagerService.families$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.families=i,this._changeDetectorRef.markForCheck()}),this._fileManagerService.family$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.selectedFamily=i,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this.drawerMode=i.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,h.w)(i=>this._fileManagerService.getFamilies(i))).subscribe()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(i,n){return n.id||i}addFamily(){alert("Add new family")}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(c.gz),e.Y36(e.sBO),e.Y36(c.F0),e.Y36(d),e.Y36(w.T))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-family-list"]],viewQuery:function(i,n){if(1&i&&e.Gf(k,7),2&i){let a;e.iGM(a=e.CRH())&&(n.matDrawer=a.first)}},decls:21,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-100","dark:bg-gray-900",3,"disableClose","mode","opened","position"],["matDrawer",""],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex-auto"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","formControl","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf","ngIfElse"],["familyTemplate",""],["noItems",""],[4,"ngFor","ngForOf"],[1,"p-6","md:p-8"],[1,"z-10","sticky","top-0","-mt-px","p-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-3","lg:grid-cols-3","gap-2","w-full","min-w-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","flex-col","flex-auto","m-2","px-4","pt-4","shadow","rounded-2xl","cursor-pointer","bg-card","overflow-hidden"],[1,"row"],["alt","Family","src","assets/images/profile/family-mock.webp",1,"object-cover"],[1,"mx-8","mt-4","mb-2"],[1,"flex","justify-between"],[1,"flex","flex-col"],[1,"text-secondary","text-md"],[1,"text-2xl","font-semibold","leading-tight","mt-1"],[1,"flex","items-center","mt-4","space-x-4"],["mat-stroked-button","","type","button",1,"flex-auto"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","type","button",1,"flex-auto","mat-primary",3,"routerLink"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-drawer-container",1),e.NdJ("backdropClick",function(){return n.onBackdropClicked()}),e.TgZ(2,"mat-drawer",2,3),e._UZ(4,"router-outlet"),e.qZA(),e.TgZ(5,"mat-drawer-content",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"mat-form-field",8),e._UZ(10,"mat-icon",9),e._UZ(11,"input",10),e.qZA(),e.qZA(),e.TgZ(12,"button",11),e.NdJ("click",function(){return n.addFamily()}),e._UZ(13,"mat-icon",12),e.TgZ(14,"span",13),e._uU(15,"Add"),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,M,3,4,"ng-container",14),e.YNc(17,R,19,9,"ng-template",null,15,e.W1O),e.YNc(19,B,4,1,"ng-template",null,16,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const a=e.MAs(20);e.xp6(2),e.Q6J("disableClose",!0)("mode",n.drawerMode)("opened",!1)("position","end"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("autocomplete","off")("formControl",n.searchInputControl)("placeholder","Search families"),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(3),e.Q6J("ngIf",n.families&&n.families.length&&n.families.length>0)("ngIfElse",a)}},directives:[p.kh,p.jA,c.lC,p.LW,A.KE,g.Hw,A.qo,D.Nt,f.Fj,f.JJ,f.oH,v.lW,m.O5,m.sg,m.tP,c.rH],pipes:[U],styles:["fuse-card{margin:8px}\n"],encapsulation:2,changeDetection:0}),t})(),Y=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-family"]],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},directives:[c.lC],encapsulation:2,changeDetection:0}),t})();const j=function(t){return["./",t]},z=function(t){return["../../","member",t]};function N(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",16),e.TgZ(2,"a",17),e.TgZ(3,"div",18),e.TgZ(4,"div",19),e._uU(5),e.qZA(),e.TgZ(6,"div",20),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",18),e.TgZ(9,"button",21),e._uU(10,"View "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&t){const i=o.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,j,i.id)),e.xp6(3),e.Oqu(i.name),e.xp6(2),e.Oqu(i.relation),e.xp6(2),e.Q6J("color","primary")("routerLink",e.VKq(7,z,i.id))}}const G=function(){return["../"]};let $=(()=>{class t{constructor(i,n,a){this._changeDetectorRef=i,this._fileManagerListComponent=n,this._familyService=a,this._unsubscribeAll=new Z.xQ}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this._familyService.family$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{this._fileManagerListComponent.matDrawer.open(),this.family=i,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(i,n){return n.id||i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(e.sBO),e.Y36(F),e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-details"]],decls:38,vars:9,consts:[[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"aspect-w-9","aspect-h-6","mt-8"],[1,"flex","items-center","justify-center","border","rounded-lg","bg-gray-50","dark:bg-card"],["alt","Family","src","assets/images/profile/family-mock.webp",1,"object-cover"],[1,"flex","flex-col","items-start","mt-8"],[1,"text-xl","font-medium"],[1,"text-lg","font-medium","mt-8"],[1,"flex","flex-col","mt-4","border-t","border-b","divide-y","font-medium"],[1,"flex","items-center","justify-between"],[1,"w-full"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"row"],[1,"z-20","flex","items-center","justify-between","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"routerLink"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],[1,"leading-5","truncate","text-secondary"],["mat-flat-button","",1,"flex-auto",3,"color","routerLink"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e._UZ(3,"mat-icon",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e._uU(11,"Members"),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.YNc(15,N,11,9,"ng-container",13),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e._uU(17,"About"),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"div"),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e._uU(22,"Details"),e.qZA(),e.TgZ(23,"div",14),e.TgZ(24,"div",15),e._uU(25,"Division"),e.qZA(),e.TgZ(26,"div"),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"div",14),e.TgZ(29,"div",15),e._uU(30,"Sub Division"),e.qZA(),e.TgZ(31,"div"),e._uU(32),e.qZA(),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e._uU(35,"Member Since"),e.qZA(),e.TgZ(36,"div"),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Q6J("routerLink",e.DdM(8,G)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(6),e.Oqu(n.family.name),e.xp6(6),e.Q6J("ngForOf",n.family.members),e.xp6(5),e.Oqu(n.family.about),e.xp6(7),e.Oqu(n.family.divisionId),e.xp6(5),e.Oqu(n.family.subDivisionId||""),e.xp6(5),e.Oqu(n.family.memberSince))},directives:[v.lW,c.rH,g.Hw,m.sg,c.yS],styles:[""]}),t})();var W=r(6759),H=r(4296),K=r(5349),P=r(7156),V=r(2072);let E=(()=>{class t{constructor(i){this._familyService=i}resolve(i,n){return this._familyService.getFamilies()}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(d))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X=(()=>{class t{constructor(i,n){this._router=i,this._familyService=n}resolve(i,n){return this._familyService.getFamilyById(i.paramMap.get("id")).pipe((0,V.K)(a=>{console.error(a);const l=n.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(l),(0,b._)(a)}))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(c.F0),e.LFG(d))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ee=(()=>{class t{canDeactivate(i,n,a,l){let s=l.root;for(;s.firstChild;)s=s.firstChild;return!(l.url.includes("/family")&&!s.paramMap.get("id"))||i.closeDrawer().then(()=>!0)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var te=r(8473);const ie=[{path:"",component:Y,children:[{path:"",component:F,resolve:{items:E},children:[{path:":id",component:$,resolve:{item:X},canDeactivate:[ee]}]}]}];let ne=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[m.ez,c.Bz.forChild(ie),te.q,p.SJ,v.ot,g.Ps,P.ie,W.AV,H.J,K.m]]}),t})()}}]);