(self.webpackChunksocio=self.webpackChunksocio||[]).push([[754],{9754:(e,t,i)=>{"use strict";i.r(t),i.d(t,{FamilyModule:()=>V});var r=i(1116),n=i(3464),o=i(5959),s=i(5416),a=i(4689),l=i(1041),c=i(5366),u=i(8512),m=i(1225),f=i(878),d=i(6599),p=i(611),g=i(9996),Z=i(2693);let h=(()=>{class e{constructor(e){this._httpClient=e,this._family=new u.X(null),this._families=new u.X(null)}get families$(){return this._families.asObservable()}get family$(){return this._family.asObservable()}getFamilies(e){return this._httpClient.get("api/apps/family").pipe((0,d.b)(e=>{this._families.next(e)}))}getFamilyById(e){return this._families.pipe((0,p.q)(1),(0,g.U)(t=>{const i=t.find(t=>t.id===e)||null;return this._family.next(i),i}),(0,a.w)(t=>t?(0,f.of)(t):(0,m._)("Could not found the family with id of "+e+"!")))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(Z.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=i(7772),x=i(168),b=i(3070),y=i(7307),_=i(9550),A=i(4369);let q=(()=>{class e{transform(e,t){if(!e)return null;const i=e.reduce((e,i)=>(e[i[t]]?e[i[t]].push(i):e[i[t]]=[i],e),{});return Object.keys(i).map(e=>({key:e,value:i[e]}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"groupBy",type:e,pure:!0}),e})();const T=["matDrawer"];function w(e,t){1&e&&c.GkF(0)}const k=function(e){return{family:e}};function C(e,t){if(1&e&&(c.ynx(0),c.YNc(1,w,1,0,"ng-container",21),c.BQk()),2&e){const e=t.$implicit;c.oxw(3);const i=c.MAs(18);c.xp6(1),c.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",c.VKq(2,k,e))}}function F(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",18),c.TgZ(2,"div",19),c._uU(3),c.qZA(),c.TgZ(4,"div",20),c.YNc(5,C,2,4,"ng-container",17),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.key),c.xp6(2),c.Q6J("ngForOf",e.value)}}function O(e,t){if(1&e&&(c.ynx(0),c.YNc(1,F,6,2,"div",17),c.ALo(2,"groupBy"),c.BQk()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",c.xi3(2,1,e.families,"divisionId"))}}const U=function(e){return["./",e]};function I(e,t){if(1&e&&(c.TgZ(0,"div",22),c.TgZ(1,"div",23),c._UZ(2,"img",24),c.qZA(),c.TgZ(3,"div",25),c.TgZ(4,"div",26),c.TgZ(5,"div",27),c.TgZ(6,"div",28),c._uU(7),c.qZA(),c.TgZ(8,"div",29),c._uU(9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",30),c.TgZ(11,"button",31),c._uU(12," Details "),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.family;c.xp6(7),c.Oqu(e.address),c.xp6(2),c.hij(" ",e.name," "),c.xp6(2),c.Q6J("color","primary")("routerLink",c.VKq(4,U,e.id))}}function D(e,t){1&e&&(c.TgZ(0,"div",32),c._UZ(1,"mat-icon",33),c.TgZ(2,"div",34),c._uU(3,"There are no items!"),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.Q6J("svgIcon","iconsmind:file_hide"))}let J=(()=>{class e{constructor(e,t,i,r,n){this._activatedRoute=e,this._changeDetectorRef=t,this._router=i,this._fileManagerService=r,this._fuseMediaWatcherService=n,this._unsubscribeAll=new o.xQ,this.searchInputControl=new l.NI}ngOnInit(){this._fileManagerService.families$.pipe((0,s.R)(this._unsubscribeAll)).subscribe(e=>{this.families=e,this._changeDetectorRef.markForCheck()}),this._fileManagerService.family$.pipe((0,s.R)(this._unsubscribeAll)).subscribe(e=>{this.selectedFamily=e,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,s.R)(this._unsubscribeAll)).subscribe(e=>{this.drawerMode=e.matches?"side":"over",this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,s.R)(this._unsubscribeAll),(0,a.w)(e=>this._fileManagerService.getFamilies(e))).subscribe()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}trackByFn(e,t){return t.id||e}addFamily(){alert("Add new family")}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(n.gz),c.Y36(c.sBO),c.Y36(n.F0),c.Y36(h),c.Y36(v.T))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-family-list"]],viewQuery:function(e,t){if(1&e&&c.Gf(T,7),2&e){let e;c.iGM(e=c.CRH())&&(t.matDrawer=e.first)}},decls:21,vars:12,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-100","dark:bg-gray-900",3,"disableClose","mode","opened","position"],["matDrawer",""],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex-auto"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","formControl","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf","ngIfElse"],["familyTemplate",""],["noItems",""],[4,"ngFor","ngForOf"],[1,"p-6","md:p-8"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-3","lg:grid-cols-4","gap-6","w-full","min-w-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","flex-col","flex-auto","m-2","p-4","shadow","rounded-2xl","cursor-pointer","bg-card","overflow-hidden"],[1,"row"],["alt","Family","src","assets/images/profile/family-mock.webp",1,"object-cover"],[1,"m-8","mb-4"],[1,"flex","justify-between"],[1,"flex","flex-col"],[1,"text-secondary","text-md"],[1,"text-2xl","font-semibold","leading-tight","mt-1"],[1,"mt-3","-mx-3"],["mat-button","",1,"px-3","mr-1",3,"color","routerLink"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"mat-drawer-container",1),c.NdJ("backdropClick",function(){return t.onBackdropClicked()}),c.TgZ(2,"mat-drawer",2,3),c._UZ(4,"router-outlet"),c.qZA(),c.TgZ(5,"mat-drawer-content",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"mat-form-field",8),c._UZ(10,"mat-icon",9),c._UZ(11,"input",10),c.qZA(),c.qZA(),c.TgZ(12,"button",11),c.NdJ("click",function(){return t.addFamily()}),c._UZ(13,"mat-icon",12),c.TgZ(14,"span",13),c._uU(15,"Add"),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,O,3,4,"ng-container",14),c.YNc(17,I,13,6,"ng-template",null,15,c.W1O),c.YNc(19,D,4,1,"ng-template",null,16,c.W1O),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.MAs(20);c.xp6(2),c.Q6J("disableClose",!0)("mode",t.drawerMode)("opened",!1)("position","end"),c.xp6(8),c.Q6J("svgIcon","heroicons_solid:search"),c.xp6(1),c.Q6J("autocomplete","off")("formControl",t.searchInputControl)("placeholder","Search families"),c.xp6(1),c.Q6J("color","primary"),c.xp6(1),c.Q6J("svgIcon","heroicons_outline:plus"),c.xp6(3),c.Q6J("ngIf",t.families&&t.families.length&&t.families.length>0)("ngIfElse",e)}},directives:[x.kh,x.jA,n.lC,x.LW,b.KE,y.Hw,b.qo,_.Nt,l.Fj,l.JJ,l.oH,A.lW,r.O5,r.sg,r.tP,n.rH],pipes:[q],styles:["fuse-card{margin:8px}"],encapsulation:2,changeDetection:0}),e})(),Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-family"]],decls:1,vars:0,template:function(e,t){1&e&&c._UZ(0,"router-outlet")},directives:[n.lC],encapsulation:2,changeDetection:0}),e})();const M=function(e){return["./",e]};function Y(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",16),c.TgZ(2,"a",17),c.TgZ(3,"div",18),c.TgZ(4,"div",19),c._uU(5),c.qZA(),c.TgZ(6,"div",20),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"div",18),c.TgZ(9,"button",21),c._uU(10," View "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&e){const e=t.$implicit;c.xp6(2),c.Q6J("routerLink",c.VKq(4,M,e.id)),c.xp6(3),c.Oqu(e.name),c.xp6(2),c.Oqu(e.relation),c.xp6(2),c.Q6J("color","primary")}}const S=function(){return["../"]};let j=(()=>{class e{constructor(e,t,i){this._changeDetectorRef=e,this._fileManagerListComponent=t,this._familyService=i,this._unsubscribeAll=new o.xQ}ngOnInit(){this._fileManagerListComponent.matDrawer.open(),this._familyService.family$.pipe((0,s.R)(this._unsubscribeAll)).subscribe(e=>{this._fileManagerListComponent.matDrawer.open(),this.family=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}closeDrawer(){return this._fileManagerListComponent.matDrawer.close()}trackByFn(e,t){return t.id||e}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.sBO),c.Y36(J),c.Y36(h))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-details"]],decls:38,vars:9,consts:[[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center","justify-end"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"aspect-w-9","aspect-h-6","mt-8"],[1,"flex","items-center","justify-center","border","rounded-lg","bg-gray-50","dark:bg-card"],["alt","Family","src","assets/images/profile/family-mock.webp",1,"object-cover"],[1,"flex","flex-col","items-start","mt-8"],[1,"text-xl","font-medium"],[1,"text-lg","font-medium","mt-8"],[1,"flex","flex-col","mt-4","border-t","border-b","divide-y","font-medium"],[1,"flex","items-center","justify-between"],[1,"w-full"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","py-3"],[1,"text-secondary"],[1,"row"],[1,"z-20","flex","items-center","justify-between","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"routerLink"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],[1,"leading-5","truncate","text-secondary"],["mat-flat-button","",1,"flex-auto",3,"color"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"button",2),c._UZ(3,"mat-icon",3),c.qZA(),c.qZA(),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._UZ(6,"img",6),c.qZA(),c.qZA(),c.TgZ(7,"div",7),c.TgZ(8,"div",8),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"div",9),c._uU(11,"Members"),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c.TgZ(14,"div",12),c.YNc(15,Y,11,6,"ng-container",13),c.qZA(),c.qZA(),c.TgZ(16,"div",9),c._uU(17,"About"),c.qZA(),c.TgZ(18,"div",14),c.TgZ(19,"div"),c._uU(20),c.qZA(),c.qZA(),c.TgZ(21,"div",9),c._uU(22,"Details"),c.qZA(),c.TgZ(23,"div",14),c.TgZ(24,"div",15),c._uU(25,"Division"),c.qZA(),c.TgZ(26,"div"),c._uU(27),c.qZA(),c.qZA(),c.TgZ(28,"div",14),c.TgZ(29,"div",15),c._uU(30,"Sub Division"),c.qZA(),c.TgZ(31,"div"),c._uU(32),c.qZA(),c.qZA(),c.TgZ(33,"div",14),c.TgZ(34,"div",15),c._uU(35,"Member Since"),c.qZA(),c.TgZ(36,"div"),c._uU(37),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("routerLink",c.DdM(8,S)),c.xp6(1),c.Q6J("svgIcon","heroicons_outline:x"),c.xp6(6),c.Oqu(t.family.name),c.xp6(6),c.Q6J("ngForOf",t.family.members),c.xp6(5),c.Oqu(t.family.about),c.xp6(7),c.Oqu(t.family.divisionId),c.xp6(5),c.Oqu(t.family.subDivisionId||""),c.xp6(5),c.Oqu(t.family.memberSince))},directives:[A.lW,n.rH,y.Hw,r.sg,n.yS],styles:[""]}),e})();var B=i(4311),L=i(1925),R=i(5425),N=i(5078),z=i(7727);let $=(()=>{class e{constructor(e){this._familyService=e}resolve(e,t){return this._familyService.getFamilies()}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(h))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),G=(()=>{class e{constructor(e,t){this._router=e,this._familyService=t}resolve(e,t){return this._familyService.getFamilyById(e.paramMap.get("id")).pipe((0,z.K)(e=>{console.error(e);const i=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(i),(0,m._)(e)}))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(n.F0),c.LFG(h))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W=(()=>{class e{canDeactivate(e,t,i,r){let n=r.root;for(;n.firstChild;)n=n.firstChild;return!r.url.includes("/family")||!!n.paramMap.get("id")||e.closeDrawer().then(()=>!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=i(1778);const K=[{path:"",component:Q,children:[{path:"",component:J,resolve:{items:$},children:[{path:":id",component:j,resolve:{item:G},canDeactivate:[W]}]}]}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[],imports:[[r.ez,n.Bz.forChild(K),H.q,x.SJ,A.ot,y.Ps,N.ie,B.AV,L.J,R.m]]}),e})()}}]);